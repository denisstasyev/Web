## Домашнее задание 5


### Установка СУБД

Для выполнения ДЗ необходимо установить Postgres и библиотеку psycopg2 (коннектор для Python)
psycopg2 устанавливаем в virtualenv

### Создание схемы базы данных

Далее нужно создать структуру базы данных для того что бы хранить данные вашего проекта.
Вы можете самостоятельно спроектировать базу, а можете ориентироваться на предлагаемую ниже схему:

![Default database design](https://raw.githubusercontent.com/denisstasyev/Web/master/database.png)

Структуру базы данных нужно оформить в виде SQL скрипта в файле `project_dir/sql/000_schema.sql`
Файл не должен содержать ошибок. У любого разработчика (и преподавателя в том числе)
должна быть возможность развернуть базу данных простым запуском `psql < project_dir/sql/000_schema.sql`

Обычно удобно первоначальную схему базы данных создать руками, а потом сохранить в файл
с помощью команды `pg_dump -s your_database_name`.  Все последующие изменения в схеме базы
данных нужно оформлять в виде отдельный файлов (миграций) с именами вида `project_dir/sql/001_fix_users_table.sql`

Имена всех миграций нужно начинать с порядкового номера, что бы можно было применить их все просто в порядке 
имен файлов `ls project_dir/sql/* | sort | xargs psql your_database_name -f`

### Работа с базой из Python кода

Вам необходимо создать отдельный Python модуль `project_dir/app/db.py` для работы с базой данных.
Так же необходимо создать модуль `project_dir/app/model.py`, в котором разместить все запросы к СУБД.
Крайне важно вынести функционал в отдельные модули, что бы вам не пришлось SQL запросы в обработчиках HTTP запросов.
Внутри модуля `db.py` так же важно избежать дублирования кода, для этого все повторяющие куски кода,
например подключение к базе данных, нужно вынести в отдельные функции.

Далее следует написать SQL запросы (и соответвующие им функции в `model.py`) для следующих методов API:
- поиска пользователей
- создание персонального чата
- получение списка чатов